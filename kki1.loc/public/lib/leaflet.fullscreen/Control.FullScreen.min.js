(function(){var n,i,t,r;if(L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},onAdd:function(n){var i="leaflet-control-zoom-fullscreen",t,r="";t=n.zoomControl&&!this.options.forceSeparateButton?n.zoomControl._container:L.DomUtil.create("div","leaflet-bar");this.options.content?r=this.options.content:i+=" fullscreen-icon";this._createButton(this.options.title,i,r,t,this.toggleFullScreen,this);this._map.on("enterFullscreen exitFullscreen",this._toggleTitle,this);return t},_createButton:function(t,i,r,u,f,e){return this.link=L.DomUtil.create("a",i,u),this.link.href="#",this.link.title=t,this.link.innerHTML=r,L.DomEvent.addListener(this.link,"click",L.DomEvent.stopPropagation).addListener(this.link,"click",L.DomEvent.preventDefault).addListener(this.link,"click",f,e),L.DomEvent.addListener(u,n.fullScreenEventName,L.DomEvent.stopPropagation).addListener(u,n.fullScreenEventName,L.DomEvent.preventDefault).addListener(u,n.fullScreenEventName,this._handleEscKey,e),L.DomEvent.addListener(document,n.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,n.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,n.fullScreenEventName,this._handleEscKey,e),this.link},toggleFullScreen:function(){var t=this._map;t._exitFired=!1;t._isFullscreen?(n.supportsFullScreen&&!this.options.forcePseudoFullscreen?n.cancelFullScreen(this.options.fullscreenElement?this.options.fullscreenElement:t._container):L.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:t._container,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1):(n.supportsFullScreen&&!this.options.forcePseudoFullscreen?n.requestFullScreen(this.options.fullscreenElement?this.options.fullscreenElement:t._container):L.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:t._container,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("enterFullscreen"),t._isFullscreen=!0)},_toggleTitle:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel},_handleEscKey:function(){var t=this._map;n.isFullScreen(t)||t._exitFired||(t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))}),L.control.fullscreen=function(n){return new L.Control.FullScreen(n)},n={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},i="webkit moz o ms khtml".split(" "),typeof document.exitFullscreen!="undefined")n.supportsFullScreen=!0;else{for(t=0,r=i.length;t<r;t++)if(n.prefix=i[t],typeof document[n.prefix+"CancelFullScreen"]!="undefined"){n.supportsFullScreen=!0;break}typeof document.msExitFullscreen!="undefined"&&(n.prefix="ms",n.supportsFullScreen=!0)}n.supportsFullScreen&&(n.fullScreenEventName=n.prefix==="ms"?"MSFullscreenChange":n.prefix+"fullscreenchange",n.isFullScreen=function(){switch(this.prefix){case"":return document.fullscreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},n.requestFullScreen=function(n){switch(this.prefix){case"":return n.requestFullscreen();case"ms":return n.msRequestFullscreen();default:return n[this.prefix+"RequestFullScreen"]()}},n.cancelFullScreen=function(){switch(this.prefix){case"":return document.exitFullscreen();case"ms":return document.msExitFullscreen();default:return document[this.prefix+"CancelFullScreen"]()}});typeof jQuery!="undefined"&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var t=jQuery(this);n.supportsFullScreen&&n.requestFullScreen(t)})});window.fullScreenApi=n})();